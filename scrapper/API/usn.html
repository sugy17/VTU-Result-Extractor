<!DOCTYPE html>
<html>

<head>
    <title>Scrapper</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous"> -->
    <style>        
    p {
        max-width: 100%;
        max-height: 100px;
        white-space: nowrap;
        overflow-x:scroll;
        width: 100%;
        height: auto;
        background-color: rgb(173, 187, 187,0.4);
    }
    p::-webkit-scrollbar {
        height: 5px;
    }

    p::-webkit-scrollbar-track {
        box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
        border-radius: 2px;
    }

    p::-webkit-scrollbar-thumb {
        background-color: rgb(153, 153, 153);
        outline: 1px solid rgb(77, 104, 131);
        border-radius: 2px;
    }
    .loader {
        display: inline-block;
        vertical-align: middle;
        border: 5px solid #f3f3f3;
        -webkit-animation: spin 1s linear infinite;
        animation: spin 1s linear infinite;
        border-top: 5px solid #555;
        border-radius: 50%;
        width: 25px;
        height: 25px;
    }
    /* Safari */
@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
    </style>


</head>

<body>
    <center>
        <input type="text" id="usn" placeholder="Enter usn for eg-1cr17cs156" value="1cr17cs154" style="width: 30%;">
        <input type="text" id="url" placeholder="Enter url" value="https://results.vtu.ac.in/AS_CBCS/index.php" style="width: 30%;">
        <input type="button" id="submit" onclick="getrange()" value="GET">
        <div class="loader" style="visibility:hidden" id="load"></div><br>
        <div id="response"></div>
    </center>
    <script>
        var api = "/";
        function getrange() {
            clear();
            usn = document.getElementById("usn").value;
            url = document.getElementById("url").value;
            getRes([usn],url);
        }
        function getRes(usn,url) {
            var ctr=0;
            document.getElementById('load').style.visibility = 'visible';
            for (i in usn) {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                        ctr+=1;
                        document.getElementById('load').style.visibility = ctr ==  usn.length ?'hidden':'visible';
                        //document.getElementById("response").innerHTML +='<p>' + this.responseText + '</p>';
                        var marks = JSON.parse(this.responseText);
                        for(i in marks)
                            document.getElementById("response").innerHTML +='<p>' + marks[i] + '</p>';
                    }
                };
                xhttp.open("GET", api+"individual?usn=" + usn[i]+"&url="+url, true);
                xhttp.send();
            }
        }
        function clear() {
            response = document.getElementById("response");
            response.innerHTML = "";
        }
    </script>
</body>

</html>